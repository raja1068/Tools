<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online tool to remove backgrounds from images with AI. Replace with transparent background, solid colors, or scenic backgrounds.">
    <meta name="keywords" content="background remover, remove bg, transparent background, photo editor, AI background removal, image background changer">
    <meta name="author" content="BackgroundRemoverPro">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Free Online Background Removal Tool">
    <meta property="og:description" content="Remove backgrounds from images automatically with AI and replace with transparent or custom backgrounds.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://raja1068.github.io/Tools/background-remover.html">
    <meta property="og:image" content="https://raja1068.github.io/Tools/background-remover-preview.jpg">
    <link rel="canonical" href="https://raja1068.github.io/Tools/background-remover/">
    <title>Free Online Background Remover | AI-Powered Tool</title>
    <style>
        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --accent-color: #ff4d4d;
            --light-gray: #f5f5f5;
            --dark-gray: #333;
            --medium-gray: #757575;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            line-height: 1.6;
            color: var(--dark-gray);
            background-color: #f9f9f9;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .ad-top, .ad-bottom {
            background-color: var(--light-gray);
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border-radius: var(--border-radius);
            border: 1px dashed #ccc;
        }
        
        main {
            padding: 40px 0;
        }
        
        .remover-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2.2rem;
            text-align: center;
        }
        
        .subtitle {
            color: var(--medium-gray);
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .upload-area {
            border: 2px dashed var(--primary-color);
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            background-color: rgba(106, 17, 203, 0.05);
        }
        
        .upload-area:hover {
            background-color: rgba(106, 17, 203, 0.1);
        }
        
        .upload-icon {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .file-input {
            display: none;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            flex: 1;
            min-width: 250px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-gray);
        }
        
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background-color: white;
        }
        
        .color-picker {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #ddd;
            cursor: pointer;
        }
        
        .button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-block;
        }
        
        .button:hover {
            background-color: #5a0cb0;
        }
        
        .button-secondary {
            background-color: var(--medium-gray);
        }
        
        .button-secondary:hover {
            background-color: #616161;
        }
        
        .results {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .comparison {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .image-box {
            flex: 1;
            min-width: 300px;
            text-align: center;
        }
        
        .image-box img {
            max-width: 100%;
            max-height: 400px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            object-fit: contain;
            background-color: #f0f0f0;
            background-image: url('data:image/svg+xml;utf8,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="10" height="10" fill="%23ddd"/><rect x="10" y="10" width="10" height="10" fill="%23ddd"/></svg>');
        }
        
        .image-info {
            margin-top: 10px;
            font-size: 14px;
        }
        
        .background-options {
            display: none;
            margin: 20px 0;
            padding: 20px;
            background-color: var(--light-gray);
            border-radius: var(--border-radius);
        }
        
        .background-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .background-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .background-tab.active {
            border-bottom-color: var(--primary-color);
            font-weight: 600;
        }
        
        .background-content {
            display: none;
        }
        
        .background-content.active {
            display: block;
        }
        
        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.selected {
            border-color: var(--dark-gray);
            transform: scale(1.1);
        }
        
        .scenery-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .scenery-option {
            width: 100%;
            aspect-ratio: 1;
            border-radius: var(--border-radius);
            cursor: pointer;
            object-fit: cover;
            border: 2px solid transparent;
            transition: transform 0.2s;
        }
        
        .scenery-option:hover {
            transform: scale(1.05);
        }
        
        .scenery-option.selected {
            border-color: var(--primary-color);
        }
        
        .download-btn {
            text-align: center;
            margin-top: 20px;
        }
        
        footer {
            background-color: var(--dark-gray);
            color: white;
            padding: 30px 0;
            text-align: center;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: white;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            
            .comparison {
                flex-direction: column;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="/" class="logo">BackgroundRemoverPro</a>
            <nav>
                <a href="#" class="button button-secondary">FAQ</a>
            </nav>
        </div>
    </header>
    
    <div class="container">
        <div class="ad-top">
            <!-- Google AdSense Ad Unit -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=pub-9770610643444805"
                crossorigin="anonymous"></script>
            <!-- Top Banner Ad -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-9770610643444805"
                data-ad-slot="4587389292"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        
        <main>
            <div class="remover-container">
                <h1>AI Background Remover</h1>
                <p class="subtitle">Remove backgrounds automatically and replace with transparency, colors, or scenic backgrounds</p>
                
                <div id="uploadArea" class="upload-area">
                    <div class="upload-icon">üìÅ</div>
                    <h3>Drag & Drop Your Image Here</h3>
                    <p>or click to browse files</p>
                    <input type="file" id="fileInput" class="file-input" accept="image/*">
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label for="outputType">Output Type</label>
                        <select id="outputType">
                            <option value="transparent">Transparent Background</option>
                            <option value="color">Solid Color Background</option>
                            <option value="scenery">Scenic Background</option>
                        </select>
                    </div>
                    
                    <div class="control-group" id="colorControlGroup">
                        <label for="bgColor">Background Color</label>
                        <div class="color-picker">
                            <input type="color" id="bgColor" value="#ffffff" style="display: none;">
                            <div class="color-preview" id="colorPreview" style="background-color: #ffffff;"></div>
                            <span id="colorHex">#FFFFFF</span>
                        </div>
                        <div class="color-options">
                            <div class="color-option selected" style="background-color: #ffffff;" data-color="#ffffff"></div>
                            <div class="color-option" style="background-color: #000000;" data-color="#000000"></div>
                            <div class="color-option" style="background-color: #f0f0f0;" data-color="#f0f0f0"></div>
                            <div class="color-option" style="background-color: #ff4d4d;" data-color="#ff4d4d"></div>
                            <div class="color-option" style="background-color: #4d79ff;" data-color="#4d79ff"></div>
                            <div class="color-option" style="background-color: #4dff88;" data-color="#4dff88"></div>
                        </div>
                    </div>
                    
                    <div class="control-group" id="sceneryControlGroup" style="display: none;">
                        <label>Choose Background</label>
                        <div class="scenery-options">
                            <img src="https://via.placeholder.com/100?text=Beach" class="scenery-option" data-bg="beach">
                            <img src="https://via.placeholder.com/100?text=Office" class="scenery-option" data-bg="office">
                            <img src="https://via.placeholder.com/100?text=Nature" class="scenery-option" data-bg="nature">
                            <img src="https://via.placeholder.com/100?text=City" class="scenery-option" data-bg="city">
                            <img src="https://via.placeholder.com/100?text=Studio" class="scenery-option" data-bg="studio">
                            <img src="https://via.placeholder.com/100?text=Gradient" class="scenery-option" data-bg="gradient">
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button id="removeBgBtn" class="button" disabled>Remove Background</button>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p>Processing your image with AI...</p>
                </div>
                
                <div class="results" id="resultsSection">
                    <div class="comparison">
                        <div class="image-box">
                            <h3>Original Image</h3>
                            <img id="originalImage" src="" alt="Original image">
                            <div class="image-info">
                                <p id="originalDimensions">Dimensions: 0 √ó 0</p>
                            </div>
                        </div>
                        
                        <div class="image-box">
                            <h3>Background Removed</h3>
                            <img id="processedImage" src="" alt="Processed image">
                            <div class="image-info">
                                <p id="processedDimensions">Dimensions: 0 √ó 0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="background-options" id="backgroundOptions">
                        <div class="background-tabs">
                            <div class="background-tab active" data-tab="colors">Colors</div>
                            <div class="background-tab" data-tab="scenery">Scenery</div>
                            <div class="background-tab" data-tab="upload">Upload BG</div>
                        </div>
                        
                        <div class="background-content active" id="colorsContent">
                            <div class="color-options">
                                <div class="color-option selected" style="background-color: #ffffff;" data-color="#ffffff"></div>
                                <div class="color-option" style="background-color: #000000;" data-color="#000000"></div>
                                <div class="color-option" style="background-color: #f0f0f0;" data-color="#f0f0f0"></div>
                                <div class="color-option" style="background-color: #ff4d4d;" data-color="#ff4d4d"></div>
                                <div class="color-option" style="background-color: #4d79ff;" data-color="#4d79ff"></div>
                                <div class="color-option" style="background-color: #4dff88;" data-color="#4dff88"></div>
                                <div class="color-option" style="background-color: #ffcc4d;" data-color="#ffcc4d"></div>
                                <div class="color-option" style="background-color: #cc4dff;" data-color="#cc4dff"></div>
                            </div>
                            <div class="color-picker" style="margin-top: 15px;">
                                <input type="color" id="customColor" value="#ffffff">
                                <span>Custom Color</span>
                            </div>
                        </div>
                        
                        <div class="background-content" id="sceneryContent">
                            <div class="scenery-options">
                                <img src="https://via.placeholder.com/100?text=Beach" class="scenery-option selected" data-bg="beach">
                                <img src="https://via.placeholder.com/100?text=Office" class="scenery-option" data-bg="office">
                                <img src="https://via.placeholder.com/100?text=Nature" class="scenery-option" data-bg="nature">
                                <img src="https://via.placeholder.com/100?text=City" class="scenery-option" data-bg="city">
                                <img src="https://via.placeholder.com/100?text=Studio" class="scenery-option" data-bg="studio">
                                <img src="https://via.placeholder.com/100?text=Gradient" class="scenery-option" data-bg="gradient">
                                <img src="https://via.placeholder.com/100?text=Wall" class="scenery-option" data-bg="wall">
                                <img src="https://via.placeholder.com/100?text=Park" class="scenery-option" data-bg="park">
                            </div>
                        </div>
                        
                        <div class="background-content" id="uploadContent">
                            <div class="upload-area" style="margin: 0; padding: 20px;">
                                <div class="upload-icon">üìÅ</div>
                                <h4>Upload Background Image</h4>
                                <p>JPG, PNG up to 5MB</p>
                                <input type="file" id="bgUpload" class="file-input" accept="image/*">
                            </div>
                        </div>
                    </div>
                    
                    <div class="download-btn">
                        <button id="downloadBtn" class="button">Download Processed Image</button>
                        <button id="downloadTransparentBtn" class="button button-secondary" style="margin-left: 10px;">Download PNG (Transparent)</button>
                    </div>
                </div>
            </div>
            
            <section class="seo-content">
                <h2>Remove Backgrounds Instantly with AI</h2>
                <p>Our free online background remover tool uses advanced AI technology to automatically detect and remove backgrounds from your images in seconds. Perfect for product photos, portraits, and any image where you need to isolate the subject.</p>
                
                <h3>Why Remove Backgrounds?</h3>
                <ul>
                    <li><strong>Professional product photos:</strong> Create clean white or transparent backgrounds for eCommerce</li>
                    <li><strong>Creative compositions:</strong> Place your subject in any environment with scenic backgrounds</li>
                    <li><strong>Marketing materials:</strong> Make eye-catching ads and social media posts</li>
                    <li><strong>Save time:</strong> No more manual selection with complex tools like Photoshop</li>
                </ul>
                
                <h3>How to Use Our Background Remover</h3>
                <ol>
                    <li>Upload your image by dragging and dropping or clicking to browse</li>
                    <li>Choose your output type (transparent, color, or scenic background)</li>
                    <li>Click "Remove Background" to process with AI</li>
                    <li>Adjust or change the background if needed</li>
                    <li>Download your final image</li>
                </ol>
                
                <h3>Advanced Features</h3>
                <p>Our tool offers more than just background removal. After processing, you can:</p>
                <ul>
                    <li>Change to any solid color background</li>
                    <li>Select from professional scenic backgrounds</li>
                    <li>Upload your own custom background</li>
                    <li>Download with transparent background (PNG)</li>
                    <li>Download with white background (JPG)</li>
                </ul>
            </section>
        </main>
        
        <div class="ad-bottom">
            <!-- Google AdSense Ad Unit -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9770610643444805"
                crossorigin="anonymous"></script>
            <!-- Bottom Banner Ad -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-9770610643444805"
                data-ad-slot="4587389292"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="/privacy">Privacy Policy</a>
                <a href="/terms">Terms of Service</a>
                <a href="/contact">Contact Us</a>
                <a href="/blog">Blog</a>
            </div>
            <p>&copy; <span id="currentYear"></span> BackgroundRemoverPro. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // DOM elements
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            const removeBgBtn = document.getElementById('removeBgBtn');
            const outputType = document.getElementById('outputType');
            const colorControlGroup = document.getElementById('colorControlGroup');
            const sceneryControlGroup = document.getElementById('sceneryControlGroup');
            const resultsSection = document.getElementById('resultsSection');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const backgroundOptions = document.getElementById('backgroundOptions');
            const colorPreview = document.getElementById('colorPreview');
            const colorHex = document.getElementById('colorHex');
            const bgColor = document.getElementById('bgColor');
            const customColor = document.getElementById('customColor');
            
            // Variables to store image data
            let originalImage = null;
            let processedImageBlob = null;
            let transparentImageBlob = null;
            let currentBackground = '#ffffff';
            let currentScenery = 'beach';
            
            // Handle output type change
            outputType.addEventListener('change', function() {
                if (this.value === 'color') {
                    colorControlGroup.style.display = 'block';
                    sceneryControlGroup.style.display = 'none';
                } else if (this.value === 'scenery') {
                    colorControlGroup.style.display = 'none';
                    sceneryControlGroup.style.display = 'block';
                } else {
                    colorControlGroup.style.display = 'none';
                    sceneryControlGroup.style.display = 'none';
                }
            });
            
            // Handle color picker
            bgColor.addEventListener('input', function() {
                colorPreview.style.backgroundColor = this.value;
                colorHex.textContent = this.value.toUpperCase();
                currentBackground = this.value;
            });
            
            customColor.addEventListener('input', function() {
                currentBackground = this.value;
                applyBackground();
            });
            
            // Handle color options click
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    const color = this.getAttribute('data-color');
                    currentBackground = color;
                    colorPreview.style.backgroundColor = color;
                    colorHex.textContent = color.toUpperCase();
                    bgColor.value = color;
                    applyBackground();
                });
            });
            
            // Handle scenery options click
            document.querySelectorAll('.scenery-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.scenery-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    currentScenery = this.getAttribute('data-bg');
                    applyBackground();
                });
            });
            
            // Handle background tabs
            document.querySelectorAll('.background-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.background-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    document.querySelectorAll('.background-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(this.getAttribute('data-tab') + 'Content').classList.add('active');
                });
            });
            
            // Handle drag and drop
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.backgroundColor = 'rgba(106, 17, 203, 0.2)';
            });
            
            uploadArea.addEventListener('dragleave', function() {
                this.style.backgroundColor = 'rgba(106, 17, 203, 0.05)';
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.backgroundColor = 'rgba(106, 17, 203, 0.05)';
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    handleFileSelection();
                }
            });
            
            // Handle click to browse
            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            // Handle file selection
            fileInput.addEventListener('change', handleFileSelection);
            
            function handleFileSelection() {
                if (fileInput.files && fileInput.files[0]) {
                    const file = fileInput.files[0];
                    
                    // Check if file is an image
                    if (!file.type.match('image.*')) {
                        alert('Please select an image file (JPEG, PNG, etc.)');
                        return;
                    }
                    
                    // Check file size (max 10MB)
                    if (file.size > 10 * 1024 * 1024) {
                        alert('Please select an image smaller than 10MB');
                        return;
                    }
                    
                    // Read the image file
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        originalImage = new Image();
                        originalImage.onload = function() {
                            // Enable remove background button
                            removeBgBtn.disabled = false;
                            
                            // Update upload area display
                            uploadArea.innerHTML = `
                                <div style="font-size: 48px;">‚úÖ</div>
                                <h3>${file.name}</h3>
                                <p>${(file.size / 1024).toFixed(2)} KB</p>
                                <p>${originalImage.width} √ó ${originalImage.height} pixels</p>
                            `;
                        };
                        originalImage.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            }
            
            // Handle remove background button click
            removeBgBtn.addEventListener('click', function() {
                if (!originalImage) return;
                
                // Show loading indicator
                loadingIndicator.style.display = 'block';
                resultsSection.style.display = 'none';
                
                // Process image after a small delay to allow UI to update
                setTimeout(() => {
                    removeBackground(originalImage)
                        .then(blob => {
                            processedImageBlob = blob;
                            transparentImageBlob = blob;
                            displayResults(originalImage, blob);
                            
                            // Hide loading indicator
                            loadingIndicator.style.display = 'none';
                            
                            // Show background options if not transparent
                            if (outputType.value !== 'transparent') {
                                backgroundOptions.style.display = 'block';
                                applyBackground();
                            } else {
                                backgroundOptions.style.display = 'none';
                            }
                        })
                        .catch(error => {
                            console.error('Background removal error:', error);
                            alert('An error occurred during background removal. Please try again.');
                            loadingIndicator.style.display = 'none';
                        });
                }, 100);
            });
            
            // Handle download button click
            document.getElementById('downloadBtn').addEventListener('click', function() {
                if (!processedImageBlob) return;
                
                const url = URL.createObjectURL(processedImageBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'background_removed_' + fileInput.files[0].name.replace(/\.[^/.]+$/, '') + '.jpg';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Handle transparent download button click
            document.getElementById('downloadTransparentBtn').addEventListener('click', function() {
                if (!transparentImageBlob) return;
                
                const url = URL.createObjectURL(transparentImageBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'transparent_' + fileInput.files[0].name.replace(/\.[^/.]+$/, '') + '.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Background removal function (simulated - in a real app you would use an API)
            function removeBackground(image) {
                return new Promise((resolve, reject) => {
                    try {
                        // In a real implementation, this would call an AI background removal API
                        // For this demo, we'll simulate it with a timeout and a simple canvas operation
                        
                        setTimeout(() => {
                            const canvas = document.createElement('canvas');
                            canvas.width = image.width;
                            canvas.height = image.height;
                            const ctx = canvas.getContext('2d');
                            
                            // Draw original image
                            ctx.drawImage(image, 0, 0);
                            
                            // Simulate background removal by making a checkerboard pattern
                            // In a real app, this would be replaced with actual AI processing
                            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                            const data = imageData.data;
                            
                            // Simple simulation - make pixels with high green component transparent
                            for (let i = 0; i < data.length; i += 4) {
                                // This is a very naive simulation - real AI would be much more sophisticated
                                const r = data[i];
                                const g = data[i + 1];
                                const b = data[i + 2];
                                
                                // Simple green screen simulation
                                if (g > r * 1.2 && g > b * 1.2) {
                                    data[i + 3] = 0; // Set alpha to 0
                                }
                            }
                            
                            ctx.putImageData(imageData, 0, 0);
                            
                            // Convert to blob (PNG for transparency)
                            canvas.toBlob(blob => {
                                if (!blob) {
                                    reject(new Error('Background removal failed'));
                                    return;
                                }
                                resolve(blob);
                            }, 'image/png');
                        }, 1500); // Simulate processing delay
                    } catch (error) {
                        reject(error);
                    }
                });
            }
            
            // Apply background to the processed image
            function applyBackground() {
                if (!transparentImageBlob) return;
                
                // Create a new image from the transparent blob
                const url = URL.createObjectURL(transparentImageBlob);
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    
                    // Fill with background color or image
                    if (outputType.value === 'color') {
                        ctx.fillStyle = currentBackground;
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                    } else if (outputType.value === 'scenery') {
                        // In a real app, you would draw the selected scenery image
                        // For demo, we'll use a gradient based on the selection
                        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                        
                        switch(currentScenery) {
                            case 'beach':
                                gradient.addColorStop(0, '#87CEEB');
                                gradient.addColorStop(1, '#E0F7FA');
                                break;
                            case 'office':
                                gradient.addColorStop(0, '#CFD8DC');
                                gradient.addColorStop(1, '#B0BEC5');
                                break;
                            case 'nature':
                                gradient.addColorStop(0, '#81C784');
                                gradient.addColorStop(1, '#AED581');
                                break;
                            case 'city':
                                gradient.addColorStop(0, '#757575');
                                gradient.addColorStop(1, '#9E9E9E');
                                break;
                            case 'studio':
                                gradient.addColorStop(0, '#424242');
                                gradient.addColorStop(1, '#212121');
                                break;
                            case 'gradient':
                                gradient.addColorStop(0, '#6a11cb');
                                gradient.addColorStop(1, '#2575fc');
                                break;
                            default:
                                gradient.addColorStop(0, '#f5f5f5');
                                gradient.addColorStop(1, '#e0e0e0');
                        }
                        
                        ctx.fillStyle = gradient;
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                    }
                    
                    // Draw the transparent image on top
                    ctx.drawImage(img, 0, 0);
                    
                    // Convert to blob (JPG for colored backgrounds)
                    canvas.toBlob(blob => {
                        processedImageBlob = blob;
                        document.getElementById('processedImage').src = URL.createObjectURL(blob);
                    }, 'image/jpeg', 0.9);
                };
                img.src = url;
            }
            
            // Display results
            function displayResults(originalImg, processedBlob) {
                // Original image info
                document.getElementById('originalImage').src = originalImg.src;
                document.getElementById('originalDimensions').textContent = 
                    `Dimensions: ${originalImg.width} √ó ${originalImg.height}`;
                
                // Processed image info
                const processedUrl = URL.createObjectURL(processedBlob);
                const processedImg = new Image();
                processedImg.onload = function() {
                    document.getElementById('processedImage').src = processedUrl;
                    document.getElementById('processedDimensions').textContent = 
                        `Dimensions: ${processedImg.width} √ó ${processedImg.height}`;
                    
                    // Show results
                    resultsSection.style.display = 'block';
                };
                processedImg.src = processedUrl;
            }
        });
    </script>
</body>
</html>
